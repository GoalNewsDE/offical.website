<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Admin Dashboard - GoalNewsDE</title>

    <!-- WICHTIG: sofortige Pr√ºfung vor Styles/Content -->
    <script>
        (function () {
            // Name des SessionKeys (muss mit dem Login √ºbereinstimmen)
            const KEY = 'adminLoggedIn';

            try {
                const ok = sessionStorage.getItem(KEY) === 'true';
                if (!ok) {
                    // Wenn kein Login, sofort weiterleiten ‚Äî kein Inhalt wird gezeigt
                    location.replace('fehler.html');
                } else {
                    // Zugriff erlaubt ‚Äî Session entfernen, damit erneuter Direktaufruf fehlschl√§gt
                    // Verz√∂gerung 0ms ist ok; wir sind bereits auf der Seite
                    sessionStorage.removeItem(KEY);
                }
            } catch (e) {
                // Falls sessionStorage geblockt ist -> besser weg
                location.replace('fehler.html');
            }
        })();
    </script>

    <style>
        /* Design passend zur Startseite */
        html,
        body {
            height: 100%;
            margin: 0;
            font-family: Arial, sans-serif
        }

        body {
            background: linear-gradient(180deg, #065348, #6a88ad);
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: background .3s, color .3s
        }

        body.light {
            background: linear-gradient(180deg, #fff, #d3d3d3);
            color: #000
        }

        header {
            margin-top: 28px
        }

        h1 {
            font-size: 2.4rem;
            margin: 0 0 8px;
            background: linear-gradient(90deg, #1db954, #00d4ff, #1db954);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent
        }

        p {
            margin: 0 0 18px
        }

        .btn {
            background: #065348;
            color: #fff;
            border: none;
            padding: 12px 22px;
            border-radius: 18px;
            margin: 8px;
            cursor: pointer;
            transition: all .2s
        }

        .btn:hover {
            transform: scale(1.03);
            background: #1db954
        }

        #themeToggle {
            position: fixed;
            top: 18px;
            right: 18px;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: #065348;
            color: #fff;
            border: 0;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center
        }

        main {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%
        }

        .card {
            background: rgba(0, 0, 0, 0.28);
            padding: 26px;
            border-radius: 16px;
            width: 90%;
            max-width: 560px;
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.25)
        }

        textarea {
            width: 100%;
            height: 140px;
            padding: 12px;
            border-radius: 10px;
            border: none;
            resize: vertical;
            font-size: 1rem
        }

        @media(max-width:600px) {
            h1 {
                font-size: 1.6rem
            }

            .card {
                padding: 18px
            }
        }
    </style>
</head>

<body>

    <button id="themeToggle" aria-label="Theme">üåô</button>

    <header>
        <h1>Admin Dashboard</h1>
        <p>Willkommen ‚Äî du bist eingeloggt (nur kurz g√ºltig).</p>
    </header>

    <main>
        <div class="card" role="region" aria-label="Admin Funktionen">
            <h2>‚öΩ Bundesliga-Tabelle bearbeiten</h2>
            <textarea id="tableData" placeholder='JSON hier einf√ºgen: [{"team":"Bayern","points":30}, ...]'></textarea>
            <div style="margin-top:12px;text-align:center">
                <button class="btn" onclick="saveData()">Speichern</button>
                <button class="btn" onclick="logout()">Logout</button>
            </div>
        </div>
    </main>

    <script>
        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light');
            themeToggle.textContent = document.body.classList.contains('light') ? '‚òÄÔ∏è' : 'üåô';
        });

        function logout() {
            // klar machen, dass beim Logout kein Zugriffs-Token mehr existiert
            try { sessionStorage.removeItem('adminLoggedIn'); } catch (e) { }
            // zur√ºck zur Login-Seite
            location.href = 'admin.html';
        }

        function saveData() {
            const content = document.getElementById('tableData').value.trim();
            if (!content) {
                alert('Bitte JSON eingeben, bevor du speicherst.');
                return;
            }
            // Platzhalter: hier w√ºrdest du per fetch() an einen Server oder API senden.
            // Aktuell nur Best√§tigung
            try {
                JSON.parse(content);
                alert('Daten ok ‚Äî (fakem√§√üig) gespeichert ‚úÖ');
            } catch (e) {
                alert('Ung√ºltiges JSON. Bitte √ºberpr√ºfe die Formatierung.');
            }
        }
    </script>
</body>

</html>